# üíå –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏ (Mailing Management Service)

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Django, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–º–∏ —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Å–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏, –≤–∫–ª—é—á–∞—è:

* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏:** CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ö–ª–∏–µ–Ω—Ç–æ–≤ (–ü–æ–ª—É—á–∞—Ç–µ–ª–µ–π), –°–æ–æ–±—â–µ–Ω–∏–π –∏ –†–∞—Å—Å—ã–ª–æ–∫.
* **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —á–µ—Ä–µ–∑ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ **`django-apscheduler`**.
* **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å:** –°–±–æ—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ (—É—Å–ø–µ—Ö/–Ω–µ—É—Å–ø–µ—Ö, –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞) –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ `MailingAttempt`.
* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞:**
    * **–í–ª–∞–¥–µ–ª–µ—Ü:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏–º–∏ —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏ –∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏.
    * **–ú–µ–Ω–µ–¥–∂–µ—Ä:** –ò–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ä–∞—Å—Å—ã–ª–æ–∫/–∫–ª–∏–µ–Ω—Ç–æ–≤, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
* **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–µ—Ä–≤–µ—Ä–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Redis**).
* **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –≤—Ö–æ–¥–∞, –≤—ã—Ö–æ–¥–∞, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –∏ –∫–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –ø–æ email.
* **–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ —Ä–∞—Å—Å—ã–ª–∫–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

### üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã:

* Python (3.10+)
* Poetry (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏)
* PostgreSQL (–∏–ª–∏ –¥—Ä—É–≥–æ–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ë–î, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ `.env`)
* Redis (–¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è)

### üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**
    ```bash
    git clone https://github.com/NikaDeveloper/Mailing_management_service
    cd Mailing_management_service
    ```

2.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
    ```bash
    poetry install
    ```

3.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª **`.env`** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—è `.env.example` –∏–ª–∏ —à–∞–±–ª–æ–Ω:
    ```env
    # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    SECRET_KEY=–í–ê–®_–°–ï–ö–†–ï–¢–ù–´–ô_–ö–õ–Æ–ß
    DEBUG=True

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
    DB_NAME=mailing_management_service
    DB_USER=postgres
    DB_PASSWORD=
    DB_HOST=localhost
    DB_PORT=5432

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—á—Ç—ã (SMTP)
    EMAIL_HOST=smtp.example.com
    EMAIL_PORT=587
    EMAIL_USE_TLS=True
    EMAIL_HOST_USER=user@example.com
    EMAIL_HOST_PASSWORD=password
    DEFAULT_FROM_EMAIL=user@example.com
    SERVER_EMAIL=user@example.com
    ```

4.  **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
    ```bash
    poetry run python manage.py migrate
    poetry run python manage.py createsuperuser
    ```

5.  **–°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø –¥–æ—Å—Ç—É–ø–∞ (–ú–µ–Ω–µ–¥–∂–µ—Ä—ã):**
    ```bash
    poetry run python manage.py creategroups
    ```

6.  **–ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–í–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫):**
    –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `honcho` –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ **`Procfile`** –ø—Ä–æ–ø–∏—Å–∞–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π –≤ Windows:

    ```text:Procfile  
    # –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–≤–µ –∫–Ω–æ–ø–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∫–æ–º–∞–Ω–¥—ã
    web: poetry run python manage.py runserver
    worker: set PYTHONIOENCODING=utf8 && poetry run python manage.py run_scheduler
    ```

    –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞:
    ```bash
    poetry run honcho start
    ```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://127.0.0.1:8000/`.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
    ‚îú‚îÄ‚îÄ config/ # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ 
    ‚îú‚îÄ‚îÄ mailing/ # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫, —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –ø–æ–ø—ã—Ç–æ–∫ 
    ‚îú‚îÄ‚îÄ management/commands/ # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (run_scheduler, send_mailings) 
    ‚îÇ
    ‚îú‚îÄ‚îÄ models.py # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö 
    ‚îÇ 
    ‚îú‚îÄ‚îÄ scheduler.py # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ APScheduler 
    ‚îÇ 
    ‚îú‚îÄ‚îÄ services.py # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –∑–∞–ø–∏—Å–∏ –ø–æ–ø—ã—Ç–æ–∫ 
    ‚îÇ 
    ‚îî‚îÄ‚îÄ views.py # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å –º–∏–∫—Å–∏–Ω–∞–º–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º 
    ‚îú‚îÄ‚îÄ users/ # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ 
    ‚îÇ 
    ‚îú‚îÄ‚îÄ management/commands/ # –ö–æ–º–∞–Ω–¥–∞ creategroups 
    ‚îÇ 
    ‚îú‚îÄ‚îÄ models.py # –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å User 
    ‚îÇ 
    ‚îî‚îÄ‚îÄ views.py # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ 
    ‚îî‚îÄ‚îÄ templates/ # –û–±—â–∏–µ —à–∞–±–ª–æ–Ω—ã (base.html)
 ```

## üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ —Ä–æ–ª–∏

| –†–æ–ª—å | –ü—Ä–∞–≤–∞ |
| :--- | :--- |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (Owner)** | –°–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ **—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö** —Ä–∞—Å—Å—ã–ª–æ–∫, —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤. –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤ –ø–æ —Å–≤–æ–∏–º —Ä–∞—Å—Å—ã–ª–∫–∞–º. |
| **–ú–µ–Ω–µ–¥–∂–µ—Ä** | –ü—Ä–æ—Å–º–æ—Ç—Ä **–≤—Å–µ—Ö** —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞) —Ä–∞—Å—Å—ã–ª–æ–∫, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è). |
| **–°—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–Ω–µ–ª—å. |

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

* **–§—Ä–µ–π–º–≤–æ—Ä–∫:** Django
* **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL
* **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** Poetry
* **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫:** `django-apscheduler`
* **–ö—ç—à:** Redis (`django-redis`)
* **–ó–∞–ø—É—Å–∫:** `honcho`